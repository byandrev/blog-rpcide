---
import Layout from "../layouts/Layout.astro";
import Newsletter from "../components/Newsletter.astro";

import { getAllPosts } from "../lib/Posts";
import ListRecentPosts from "../components/ListRecentPosts.astro";

const { posts, count, hasNext } = await getAllPosts({ page: 1 });

console.log(count);

if (!posts) {
  return new Response(null, {
    status: 404,
    statusText: "Not found",
  });
}
---

<Layout title="Blog">
  <ListRecentPosts posts={posts} hasNext={hasNext} />

  <Newsletter />
</Layout>

<style></style>
